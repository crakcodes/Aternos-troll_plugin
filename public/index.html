<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Connexion Plugin troll</title>
<style>
  /* Reset simple */
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;font-family: "Segoe UI", Roboto, Arial, sans-serif;background:#2f3a3f;color:#fff}
  /* Top-left simple logo area */
  .topbar{position:fixed;left:18px;top:14px;display:flex;align-items:center;gap:12px}
  .logo-square{width:40px;height:40px;border-radius:4px;background:#dfe6ea;display:flex;align-items:center;justify-content:center;color:#1a2a2f;font-weight:800;font-size:18px;box-shadow:0 2px 6px rgba(0,0,0,0.3)}
  .site-name{font-weight:800;letter-spacing:1px;color:#eaf6fb}
  /* Center column */
  .stage{min-height:100vh;display:flex;align-items:center;justify-content:center}
  .box{
    width:680px;
    max-width:95%;
    text-align:center;
  }

  h1{font-size:36px;margin-bottom:18px;color:#eaf6fb;font-weight:800; font-family: "Montserrat", "Segoe UI", Roboto, sans-serif; text-shadow:0 1px 0 rgba(0,0,0,0.4)}
  /* big create button */
  .create-btn{
    display:inline-flex;
    align-items:center;
    gap:12px;
    background:#2b93d9;
    color:#fff;
    font-weight:800;
    padding:16px 24px;
    border-radius:4px;
    border:none;
    cursor:pointer;
    box-shadow: 0 4px 0 rgba(0,0,0,0.25);
    width:420px;
    justify-content:center;
    font-size:18px;
  }
  .create-btn .icon{width:22px;height:22px;display:inline-block;background:rgba(255,255,255,0.18);border-radius:50%;line-height:22px;text-align:center;font-size:14px}
  .or-row{display:flex;align-items:center;gap:12px;margin:18px auto 12px;max-width:420px}
  .or-row .line{flex:1;height:2px;background:rgba(255,255,255,0.08)}
  .or-row .or{padding:6px 12px;color:#d1e6f0;font-weight:700}
  /* form row */
  .login-row{display:flex;align-items:center;gap:8px;justify-content:center;margin-top:8px}
  .input-username, .input-password{
    padding:10px 12px;border-radius:3px;border:1px solid rgba(255,255,255,0.06);background:#e9eef1; color:#1b2930;font-size:14px;
    outline:none;width:180px;box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
  }
  .input-password{width:120px}
  .login-btn{
    background:#1e88c6;color:#fff;padding:10px 14px;border-radius:3px;border:none;font-weight:800;cursor:pointer;
    display:inline-flex;align-items:center;gap:8px;
  }
  .aux{margin-top:8px;color:#cfe6f6;font-size:13px;opacity:.9}
  /* google connect */
  .google-btn{
    margin:18px auto 0;
    background:#f5f5f5;color:#222;border-radius:3px;padding:10px 14px;width:420px;display:flex;align-items:center;gap:10px;justify-content:center;font-weight:700;border:1px solid rgba(0,0,0,0.06)
  }
  .google-btn .g-icon{width:18px;height:18px;border-radius:2px;background:linear-gradient(90deg,#4285f4,#ea4335,#fbbc05,#34a853);display:inline-block}
  /* demo badge */
  .demo-badge{position:fixed;left:18px;top:64px;background:#ffcc00;color:#081018;padding:6px 10px;border-radius:6px;font-weight:800;letter-spacing:.4px;font-size:12px}
  /* small screens */
  @media(max-width:550px){
    .create-btn{width:320px}
    .google-btn{width:320px}
    .input-username{width:160px}
    .input-password{width:100px}
  }
</style>
</head>
<body>
  <div class="topbar" aria-hidden="false">
    <div class="logo-square" aria-hidden="true">A</div>
    <div class="site-name">Aternos connection</div>
  </div>


  <div class="stage">
    <div class="box" role="main" aria-label="connexion-demo">
      <h1>Bienvenue sur le Plugin pour troll vos potes.</h1>
      <p style="font-size: 24px; color: whitesmoke;">Veillez vous connecter avec aternos pour commencer !</p>

      <button class="create-btn" id="createAccount">
        <span class="icon">+</span>
        Créer un compte
      </button>

      <div class="or-row" style="margin-top:22px">
        <div class="line"></div>
        <div class="or">OU</div>
        <div class="line"></div>
      </div>

      <div style="margin-top:8px;color:#cfe6f6;font-weight:700;max-width:420px;margin-left:auto;margin-right:auto;text-align:left;font-size:13px">Identifiez-vous</div>

      <div class="login-row" style="margin-top:8px">
        <input class="input-username" id="username" placeholder="Nom d'utilisateur" aria-label="nom d'utilisateur">
        <input class="input-password" id="password" type="password" placeholder="••••••••" aria-label="mot de passe">
        <button class="login-btn" id="loginBtn">Identifiez-vous</button>
      </div>

      <div class="aux" style="max-width:420px;margin:6px auto 0;text-align:left">
        <a href="#" style="color:#cfe6f6;text-decoration:none;font-weight:700">Mot de passe oublié ?</a>
      </div>

      <button class="google-btn" id="googleBtn">
        <span class="g-icon" aria-hidden="true"></span>
        Connectez-vous avec Google
      </button>
    </div>
  </div>

<script>
  // comportement simple : validation & POST vers /login (comme ton code d'origine)
  document.getElementById('loginBtn').addEventListener('click', async function(e){
    e.preventDefault();
    const u = document.getElementById('username').value.trim();
    const p = document.getElementById('password').value;
    if(!u || !p){
      alert('Veuillez remplir les deux champs.');
      return;
    }
    // feedback visuel basique
    this.disabled = true;
    this.textContent = 'Connexion…';
    try {
      const res = await fetch('/login', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ username: u, password: p })
      });
      const ct = res.headers.get('content-type')||'';
      let data = {};
      if(ct.includes('application/json')) data = await res.json();
      else data = { status: res.ok ? 'success' : 'error', message: await res.text() };

      if(data.status === 'success'){
        if(data.redirect) window.location.href = data.redirect;
        else alert('Connexion réussie.');
      } else {
        alert(data.message || 'Erreur de connexion.');
      }
    } catch(err){
      console.error(err);
      //alert('Erreur réseau ou serveur (démo).');
    } finally {
      this.disabled = false;
      this.textContent = 'Identifiez-vous';
    }
  });

  // autres boutons de démonstration
  document.getElementById('createAccount').addEventListener('click', ()=> alert('imposible de créer un compte'));
  document.getElementById('googleBtn').addEventListener('click', ()=> alert('Connexion Google imposible'));
</script>
</body>
</html>
